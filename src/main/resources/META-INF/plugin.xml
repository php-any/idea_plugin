<idea-plugin>
    <id>com.company.zy-language-plugin</id>
    <name>ZY Language Support</name>
    <vendor email="support@company.com" url="https://company.com">Company</vendor>

    <description><![CDATA[
        ZY Language Support plugin for IntelliJ IDEA.
        Provides syntax highlighting and LSP-based code completion for .zy files.
        
        Features:
        - Syntax highlighting for ZY language files
        - LSP-based code completion
        - Support for .zy file extension
    ]]></description>

    <change-notes><![CDATA[
        <h3>1.0.0</h3>
        <ul>
            <li>Initial release</li>
            <li>Basic syntax highlighting for .zy files</li>
            <li>LSP-based code completion</li>
            <li>Support for ZY language file type</li>
        </ul>
    ]]></change-notes>

    <!-- please see https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File type registration -->
        <fileType name="ZY File" implementationClass="com.company.plugin.language.ZyFileType" 
                  extensions="zy" 
                  language="ZY" />
        
        <!-- Syntax highlighting -->
        <lang.syntaxHighlighterFactory language="ZY" implementationClass="com.company.plugin.highlighting.ZySyntaxHighlighterFactory" />
        
        <!-- ParserDefinition: 拆分 PSI，避免整文件成为单一元素 -->
        <lang.parserDefinition language="ZY" implementationClass="com.company.plugin.language.ZyParserDefinition"/>
        
        <!-- Code completion -->
        <completion.contributor language="ZY" implementationClass="com.company.plugin.completion.ZyCompletionContributor" />
        
        <!-- Custom navigation action -->
        <action id="ZyNavigationAction" class="com.company.plugin.navigation.ZyNavigationAction" text="ZY Navigation">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl B"/>
        </action>
        
        <!-- LSP service -->
        <projectService serviceImplementation="com.company.plugin.lsp.ZyLspService" />
        
        <!-- Project startup activity -->
        <postStartupActivity implementation="com.company.plugin.lsp.ZyProjectStartupActivity" />
        
        <!-- Document sync activity -->
        <postStartupActivity implementation="com.company.plugin.lsp.ZyDocumentSyncComponent" />

        <!-- Enter handler: 保持作用域内缩进 -->
        <enterHandlerDelegate implementation="com.company.plugin.language.ZyEnterHandler" order="first"/>

        <!-- Typed handler: 自动补全 (), {}, [] 配对 -->
        <typedHandler implementation="com.company.plugin.language.ZyTypedHandler"/>
        
        <!-- Goto declaration handler for navigation -->
        <gotoDeclarationHandler implementation="com.company.plugin.navigation.ZyGotoDeclarationHandler"/>

        <!-- PSI reference contributor: 提供标识符级的精确引用范围，控制 Alt 下划线范围 -->
        <psi.referenceContributor implementation="com.company.plugin.navigation.ZyReferenceContributor"/>

        
    </extensions>

    <actions>
        <!-- Add your actions here -->
    </actions>
</idea-plugin>
