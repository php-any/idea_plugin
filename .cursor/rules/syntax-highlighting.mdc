---
globs: *Highlighting*.java,*Syntax*.java,*Lexer*.java,*Parser*.java
description: 语法高亮和词法分析器开发规范
---

# 语法高亮开发规范

## 语法高亮实现

- 使用 IntelliJ Platform 的语法高亮 API
- 实现自定义词法分析器 (Lexer)
- 定义语法高亮规则和颜色方案
- 支持代码折叠功能

## 词法分析器要求

- 实现 DIY 语言的词法分析
- 支持关键字、标识符、字符串、注释等
- 处理嵌套结构和复杂语法
- 提供错误恢复机制

## 颜色方案

- 定义默认颜色方案
- 支持用户自定义颜色
- 适配 IDE 的深色/浅色主题
- 提供语法高亮预览

## 性能优化

- 增量解析，只解析变更部分
- 缓存解析结果
- 异步解析大文件
- 避免阻塞 UI 线程

## 文件类型支持

- 定义 DIY 语言的文件扩展名
- 注册文件类型关联
- 提供文件图标
- 支持文件模板
