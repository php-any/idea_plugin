---
globs: *ZyCompletion*.kt,*zyCompletion*.kt,*Completion*.kt
description: .zy 文件语法提示和代码补全规范
---

# .zy 文件语法提示实现

## 代码补全提供者

- 实现 ZyCompletionContributor 类
- 基于 LSP 的代码补全功能
- 支持关键字补全
- 提供变量和函数补全

## 补全类型支持

- **关键字补全**: function, if, else, for, while, return, etc.
- **变量补全**: 基于当前作用域的变量
- **函数补全**: 函数名和参数提示
- **类型补全**: 数据类型和结构体
- **导入补全**: 模块和库导入

## LSP 集成

- 使用 LSP 的 textDocument/completion 请求
- 处理 LSP 补全响应
- 支持异步补全加载
- 提供补全项排序和过滤

## 性能要求

- 补全响应时间 < 500ms
- 支持增量补全
- 缓存常用补全结果
- 避免重复计算

## 用户体验

- 提供补全项描述和文档
- 支持补全项图标和分类
- 实现补全项优先级排序
- 支持键盘导航和选择

## 错误处理

- 处理 LSP 补全请求失败
- 提供降级补全功能
- 记录补全性能指标
- 优雅处理超时情况

## 智能提示

- 上下文感知的补全
- 基于当前代码位置的智能提示
- 支持代码片段补全
- 提供参数提示和文档
